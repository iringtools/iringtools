{
    "type": "controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "parentClass": "",
        "designer|userClassName": "Mapping",
        "models": [
            "MappingModel"
        ],
        "stores": [
            "MappingStore"
        ],
        "views": [
            "common.PropertyPanel",
            "common.ContentPanel",
            "common.CenterPanel",
            "mapping.MappingTree",
            "directory.GraphMapForm",
            "mapping.ClassMapForm",
            "mapping.ClassMapWindow",
            "mapping.PropertyMapWindow",
            "directory.GraphMapWindow",
            "mapping.ValueListMapWindow",
            "mapping.ValueListMapForm",
            "mapping.ValueListWindow",
            "mapping.MappingPanel",
            "mapping.ValueListForm"
        ]
    },
    "id": "ExtBox1-ext-gen72135",
    "designerId": "5fd4e1f1-2736-412f-8d21-bfa7afb08b0b",
    "customConfigs": [
        {
            "group": "(Custom Properties)",
            "name": "parentClass",
            "type": "string"
        }
    ],
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onDeleteTemplateMap",
                "fn": "onDeleteTemplateMap",
                "implHandler": [
                    "var me = this;\r",
                    "var content = me.getMainContent();\r",
                    "var dirTree = me.getDirTree();\r",
                    "var panel = content.down('mappingpanel');\r",
                    "var tree = content.down('mappingtree'),\r",
                    "node = tree.getSelectedNode();\r",
                    "\r",
                    "me.getParentClass(node);\r",
                    "Ext.Ajax.request({\r",
                    "  url: 'mapping/deleteTemplateMap',\r",
                    "  method: 'POST',\r",
                    "  params: {\r",
                    "    contextName: panel.contextName,\r",
                    "    endpoint: panel.endpoint,\r",
                    "    baseUrl: panel.baseUrl,\r",
                    "    mappingNode: node.data.id,\r",
                    "    parentIdentifier: me.parentClass,\r",
                    "    identifier: node.data.identifier,\r",
                    "    index: node.parentNode.indexOf(node)\r",
                    "  },\r",
                    "  success: function () {\r",
                    "    tree.onReload();\r",
                    "\r",
                    "  },\r",
                    "  failure: function () { \r",
                    "\r",
                    "  }\r",
                    "});"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.menu.Item",
                "designer|controlQuery": "menuitem[action=templatemapdelete]"
            },
            "designerId": "5060182c-bc98-4686-997e-d2e77e27180c"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "dirTree",
                "ref": "dirTree",
                "selector": "viewport > directorypanel > directorytree"
            },
            "designerId": "5ec6b0d3-1178-4b6d-88f9-cef556b499b3"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "mainContent",
                "ref": "mainContent",
                "selector": "viewport > centerpanel > contentpanel"
            },
            "designerId": "bae8ae9d-5948-4601-9499-2e8a68436f63"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "getObjectType",
                "fn": "getObjectType",
                "designer|params": [
                    "type"
                ],
                "implHandler": [
                    "switch (type) {\r",
                    "  case 0:\r",
                    "  return 'Property';\r",
                    "  case 1:\r",
                    "  return 'Possessor';\r",
                    "  case 2:\r",
                    "  return 'Reference';\r",
                    "  case 3:\r",
                    "  return 'FixedValue';\r",
                    "  case 4:\r",
                    "  return 'DataProperty';\r",
                    "  case 5:\r",
                    "  return 'ObjectProperty';\r",
                    "}"
                ]
            },
            "designerId": "330d115b-b143-454f-936c-ebe9188de96e"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "getParentClass",
                "fn": "getParentClass",
                "designer|params": [
                    "n"
                ],
                "implHandler": [
                    "var me = this;\r",
                    "if ( n.parentNode !== null && n.parentNode !== undefined) {\r",
                    "  if ((n.parentNode.data.type == 'ClassMapNode' || \r",
                    "  n.parentNode.data.type == 'GraphMapNode') && \r",
                    "  n.parentNode.data.identifier !== undefined) {\r",
                    "    me.parentClass = n.parentNode.data.identifier;\r",
                    "    return me.parentClass;\r",
                    "  }\r",
                    "  else {\r",
                    "    me.getParentClass(n.parentNode);\r",
                    "  }\r",
                    "}\r",
                    "return me.parentClass;\r",
                    ""
                ]
            },
            "designerId": "8ab6cf81-9df4-42ba-bbca-7fe69585d746"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onEditOrNewGraph",
                "fn": "onEditOrNewGraph",
                "implHandler": [
                    "var me = this;\r",
                    "var nodeId, contextName, endpoint, baseUrl, graphName, \r",
                    "objectName, classLabel, classUrl, identifier, wintitle;\r",
                    "var tree = me.getDirTree();\r",
                    "var node = tree.getSelectedNode(),\r",
                    "record = node.data.record;\r",
                    "\r",
                    "if (record && record.record) {\r",
                    "  identifier = getLastXString(record.record.classTemplateMaps[0].classMap.identifiers[0], 1).split('.')[1];\r",
                    "  graphName = record.record.name;\r",
                    "  objectName = contextName + '/' + endpoint + '/' + 'DataObjects/DataObject/' + \r",
                    "  record.record.classTemplateMaps[0].classMap.identifiers[0].replace('.', '/');\r",
                    "  classLabel = record.record.classTemplateMaps[0].classMap.name;\r",
                    "  classUrl = record.record.classTemplateMaps[0].classMap.id;\r",
                    "}\r",
                    "\r",
                    "if(item.itemId == 'editgraph') {\r",
                    "  wintitle = 'Edit Graph \\\"' + graphName + '\\\"'; \r",
                    "} else {\r",
                    "  wintitle = 'Add new GraphMap to Mapping';\r",
                    "}\r",
                    "var conf = {\r",
                    "  id: 'tab-' + node.data.id,\r",
                    "  title: wintitle ,\r",
                    "  iconCls: 'tabsGraph',\r",
                    "  height: 200,\r",
                    "  width: 430\r",
                    "};\r",
                    "\r",
                    "var win = Ext.widget('graphmapwindow', conf);\r",
                    "\r",
                    "if(node) {\r",
                    "  nodeId = node.data.id;\r",
                    "  contextName = node.data.property.context;\r",
                    "  endpoint = node.data.property.endpoint;\r",
                    "  baseUrl = node.data.property.baseUrl; \r",
                    "}\r",
                    "var formRecord = {\r",
                    "  'contextName': contextName,\r",
                    "  'endpoint': endpoint,\r",
                    "  'oldGraphName': graphName,\r",
                    "  'baseUrl': baseUrl,\r",
                    "  'mappingNode': nodeId,\r",
                    "  'graphName': graphName,\r",
                    "  'objectName': objectName,\r",
                    "  'classUrl': classUrl,\r",
                    "  'classLabel': classLabel,\r",
                    "  'oldClassUrl': classUrl,\r",
                    "  'oldClassLabel': classLabel,\r",
                    "  'keyProperty': identifier\r",
                    "};\r",
                    "\r",
                    "var form = win.down('form').getForm();\r",
                    "form.setValues(formRecord);\r",
                    "\r",
                    "\r",
                    "win.down('form').updateDDContainers(record);\r",
                    "\r",
                    "win.on('save', function () {\r",
                    "  win.close(); \r",
                    "  tree.onReload();\r",
                    "}, me);\r",
                    "\r",
                    "win.on('reset', function () {\r",
                    "  win.close();\r",
                    "}, me);\r",
                    "\r",
                    "\r",
                    "win.show();"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.menu.Item",
                "designer|controlQuery": "menuitem[action=editnewgraph]"
            },
            "designerId": "b9c1914a-36eb-4758-98a1-27f2fe763bfa"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "openGraphMap",
                "fn": "openGraphMap",
                "implHandler": [
                    "var me = this;\r",
                    "var tree = me.getDirTree();\r",
                    "var node = tree.getSelectedNode();\r",
                    "var content = me.getMainContent(),\r",
                    "context = node.data.property.context,\r",
                    "endpoint = node.data.property.endpoint,\r",
                    "baseUrl = node.data.property.baseUrl,\r",
                    "graphName = node.data.text,\r",
                    "title = 'GraphMap - ' + context + \".\" + endpoint + '.' + node.data.text;\r",
                    "\r",
                    "\r",
                    "var mapPanel = content.down('mappingpanel[title='+title+']');\r",
                    "if(!mapPanel) {\r",
                    "  mapPanel = Ext.widget('mappingpanel', {\r",
                    "    'title': title, \r",
                    "    'contextName': context,\r",
                    "    'baseUrl': baseUrl, \r",
                    "    'graphName': graphName,\r",
                    "    'endpoint': endpoint\r",
                    "  });\r",
                    "  var mapProp = mapPanel.down('propertypanel');\r",
                    "\r",
                    "  var mapTree = mapPanel.down('mappingtree');\r",
                    "  var treeStore = mapTree.getStore();\r",
                    "  var params = treeStore.getProxy().extraParams;\r",
                    "  \r",
                    "  treeStore.on('beforeload', function (store, operation, eopts) {\r",
                    "    params.contextName = context;\r",
                    "    params.endpoint = endpoint;\r",
                    "    params.baseUrl = baseUrl;\r",
                    "    params.graphName = graphName;\r",
                    "  }, me);\r",
                    "\r",
                    "  mapTree.on('beforeitemexpand', function () {\r",
                    "    content.getEl().mask('Loading...');\r",
                    "  }, me);\r",
                    "\r",
                    "  mapTree.on('load', function () {\r",
                    "    content.getEl().unmask();\r",
                    "  }, me);\r",
                    "  mapTree.on('itemexpand', function () {\r",
                    "    content.getEl().unmask();\r",
                    "  }, me);\r",
                    "\r",
                    "  mapTree.on('itemclick', function (tablepanel, record, item, index, e) {\r",
                    "    var obj = record.store.getAt(index).data;\r",
                    "    if (obj.property && obj.property !== \"\" && obj.property.length) {\r",
                    "      mapProp.setSource(obj.property);\r",
                    "    } else {\r",
                    "      if (obj.record.type  && !obj.record.roleMaps) {\r",
                    "        var arrStr = '';\r",
                    "        for (var i in obj.record) {\r",
                    "          if (i != 'type' && obj.record[i] !== null && obj.record[i] !== '') {\r",
                    "            arrStr += i + '=' + obj.record[i] + '&';\r",
                    "          }\r",
                    "        }\r",
                    "        var type = me.getObjectType(obj.record.type);\r",
                    "        arrStr += 'typeDescription=' + type;\r",
                    "        var arr = Ext.Object.fromQueryString(arrStr);\r",
                    "        mapProp.setSource(arr);\r",
                    "      }\r",
                    "      else {\r",
                    "        mapProp.setSource(obj.record);\r",
                    "      }\r",
                    "    }\r",
                    "\r",
                    "  });\r",
                    "  treeStore.load();\r",
                    "  content.add(mapPanel);\r",
                    "}\r",
                    "\r",
                    "content.setActiveTab(mapPanel);"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.menu.Item",
                "designer|controlQuery": "menuitem[action=opengraph]"
            },
            "designerId": "b7ba3102-7727-4cfb-9140-e1d437893654"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "addClassMap",
                "fn": "addClassMap",
                "implHandler": [
                    "var me = this;\r",
                    "var content = me.getMainContent();\r",
                    "var mapPanel = content.down('mappingpanel');\r",
                    "var tree = mapPanel.down('mappingtree'),\r",
                    "node = tree.getSelectedNode();\r",
                    "\r",
                    "me.getParentClass(node);\r",
                    "\r",
                    "var index = node.parentNode.parentNode.indexOf(node.parentNode);\r",
                    "var win = Ext.widget('classmapwindow', {\r",
                    "  mappingNode: node,\r",
                    "  formid: 'propertytarget-' + mapPanel.contextName + '-' + mapPanel.endpoint\r",
                    "});\r",
                    "\r",
                    "win.on('Save', function () {\r",
                    "  win.close();\r",
                    "  tree.onReload();\r",
                    "  if (node.get('expanded') === false)\r",
                    "  node.expand();\r",
                    "}, me);\r",
                    "\r",
                    "win.on('reset', function() {\r",
                    "  win.close();\r",
                    "}, me);\r",
                    "\r",
                    "var formRecord = {\r",
                    "  'contextName': mapPanel.contextName,\r",
                    "  'endpoint': mapPanel.endpoint,\r",
                    "  'baseUrl': mapPanel.baseUrl,\r",
                    "  'graphName': mapPanel.graphName,\r",
                    "  'index': index\r",
                    "};\r",
                    "\r",
                    "var form = win.down('form');\r",
                    "form.getForm().setValues(formRecord);\r",
                    "\r",
                    "win.show();\r",
                    ""
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.menu.Item",
                "designer|controlQuery": "menuitem[action=addclassmap]"
            },
            "designerId": "de34633b-4bd5-4aa9-8cda-ff7e1b37d65c"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "mapProperty",
                "fn": "mapProperty",
                "implHandler": [
                    "var me = this;\r",
                    "var content = me.getMainContent();\r",
                    "var mapPanel = content.down('mappingpanel');\r",
                    "var tree = mapPanel.down('mappingtree'),\r",
                    "node = tree.getSelectedNode(),\r",
                    "\r",
                    "win = Ext.widget('propertymapwindow', {\r",
                    "  'classId': node.parentNode.parentNode.data.identifier,\r",
                    "  'mappingNode': node\r",
                    "});\r",
                    "var roleName = getLastXString(node.data.id, 1);\r",
                    "var index = node.parentNode.parentNode.indexOf(node.parentNode);\r",
                    "win.on('Save', function () {\r",
                    "  win.close();\r",
                    "  tree.store.load();\r",
                    "  if (node.get('expanded') === false)\r",
                    "  node.expand();\r",
                    "}, me);\r",
                    "\r",
                    "var formRecord = {\r",
                    "  'contextName': mapPanel.contextName,\r",
                    "  'endpoint': mapPanel.endpoint,\r",
                    "  'baseUrl': mapPanel.baseUrl,\r",
                    "  'graphName': mapPanel.graphName,\r",
                    "  'index': index,\r",
                    "  'roleName': roleName\r",
                    "};\r",
                    "\r",
                    "var form = win.down('form');\r",
                    "form.getForm().setValues(formRecord);\r",
                    "\r",
                    "win.on('Cancel', function () {\r",
                    "  win.close();\r",
                    "}, me);\r",
                    "win.show();"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.menu.Item",
                "designer|controlQuery": "menuitem[action=mapproperty]"
            },
            "designerId": "4ca3b82d-a490-4800-ae29-3dc85134a776"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onMakeReference",
                "fn": "onMakeReference",
                "implHandler": [
                    "var me = this;\r",
                    "var content = me.getMainContent();\r",
                    "var mapPanel = content.down('mappingpanel');\r",
                    "var tree = mapPanel.down('mappingtree'),\r",
                    "  node = tree.getSelectedNode(),\r",
                    "  parentNode = node.parentNode;\r",
                    "\r",
                    "Ext.Ajax.request({\r",
                    "  url: 'mapping/makereference',\r",
                    "  method: 'POST',\r",
                    "  params: {\r",
                    "    contextName: mapPanel.contextName,\r",
                    "    endpoint: mapPanel.endpoint,\r",
                    "    baseUrl: mapPanel.baseUrl,\r",
                    "    graphName: mapPanel.graphName,\r",
                    "    roleName: getLastXString(node.data.id, 1),\r",
                    "    classId: parentNode.parentNode.data.identifier,\r",
                    "    index: parentNode.parentNode.indexOf(parentNode)\r",
                    "  },\r",
                    "  success: function () {\r",
                    "    tree.onReload();\r",
                    "  },\r",
                    "  failure: function () { }\r",
                    "});"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.menu.Item",
                "designer|controlQuery": "menuitem[action=makereference]"
            },
            "designerId": "c9d6a430-7cbb-4bec-8700-b1467283727b"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onEditOrNewValueMap",
                "fn": "onEditOrNewValueMap",
                "implHandler": [
                    "var me = this;\r",
                    "var wintitle, contextName, endpoint, baseUrl, valueList, interName, classUrl, classLabel;\r",
                    "var tree = this.getDirTree(),\r",
                    "node = tree.getSelectedNode(),\r",
                    "record = node.data.record;\r",
                    "\r",
                    "if(item.itemId == 'editvaluemap') {\r",
                    "  wintitle = 'Edit Value List \\\"' + node.data.text + '\\\"';\r",
                    "} else {\r",
                    "  wintitle = 'Add new ValueListMap to valueList \\\"' + node.data.text + '\\\"';\r",
                    "}\r",
                    "\r",
                    "if(node.data.record && node.data.type == 'ListMapNode') {\r",
                    "  interName = node.data.record.record.internalValue;\r",
                    "  classUrl = node.data.record.record.uri;\r",
                    "  classLabel = node.data.text.split('[')[0];\r",
                    "}\r",
                    "\r",
                    "contextName = node.data.property.context;\r",
                    "endpoint = node.data.property.endpoint;\r",
                    "baseUrl = node.data.property.baseUrl;\r",
                    "\r",
                    "var arr = [];\r",
                    "arr = node.data.id.split('ValueList');\r",
                    "var arr1 = arr[arr.length - 1];\r",
                    "valueList = arr1.split('/')[1];\r",
                    "\r",
                    "var win = Ext.widget('valuelistmapwindow', {\r",
                    "  id:'tab-' + node.data.id, title: wintitle\r",
                    "});\r",
                    "\r",
                    "var formRecord = {\r",
                    "  'contextName': contextName,\r",
                    "  'endpoint': endpoint,\r",
                    "  'valueList': valueList,\r",
                    "  'baseUrl': baseUrl,\r",
                    "  'mappingNode': node.data.id,\r",
                    "  'internalName': interName,\r",
                    "  'classUrl': classUrl,\r",
                    "  'classLabel': classLabel,\r",
                    "  'oldClassUrl': classUrl\r",
                    "};\r",
                    "\r",
                    "var form = win.down('form');\r",
                    "form.getForm().setValues(formRecord);\r",
                    "\r",
                    "win.on('save', function () {\r",
                    "  win.close();\r",
                    "  tree.onReload();\r",
                    "  if (node.get('expanded') === false)\r",
                    "  node.expand();\r",
                    "}, me);\r",
                    "\r",
                    "win.on('reset', function () {\r",
                    "  win.close();\r",
                    "}, me);\r",
                    "\r",
                    "win.down('form').updateDDContainer(record);\r",
                    "\r",
                    "win.show();\r",
                    ""
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.menu.Item",
                "designer|controlQuery": "menuitem[action=editnewvaluemap]"
            },
            "designerId": "a421d200-9844-4d5c-929a-142554942e2d"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onDeleteValueMap",
                "fn": "onDeleteValueMap",
                "implHandler": [
                    "var me = this;\r",
                    "var tree = me.getDirTree(),\r",
                    "node = tree.getSelectedNode();\r",
                    "\r",
                    "Ext.Ajax.request({\r",
                    "  url: 'mapping/deleteValueMap',\r",
                    "  method: 'POST',\r",
                    "  params: {\r",
                    "    contextName: node.data.property.context,\r",
                    "    endpoint: node.data.property.endpoint,\r",
                    "    baseUrl: node.data.property.baseUrl,\r",
                    "    valueList: node.parentNode.data.property.Name,\r",
                    "    oldClassUrl: node.data.record.record.uri\r",
                    "  },\r",
                    "  success: function () {\r",
                    "    var parentNode = node.parentNode;                 \r",
                    "    tree.getSelectionModel().select(parentNode);\r",
                    "    tree.onReload();\r",
                    "  },\r",
                    "  failure: function () { }\r",
                    "\r",
                    "});"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.menu.Item",
                "designer|controlQuery": "menuitem[action=deletevaluemap]"
            },
            "designerId": "b74bbd0c-1ebd-468f-a081-103c71b83fbf"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onResetMapping",
                "fn": "onResetMapping",
                "implHandler": [
                    "var me = this;\r",
                    "var content = me.getMainContent();\r",
                    "var mapPanel = content.down('mappingpanel');\r",
                    "var tree = mapPanel.down('mappingtree'),\r",
                    "node = tree.getSelectedNode();\r",
                    "\r",
                    "me.getParentClass(node);\r",
                    "Ext.Ajax.request({\r",
                    "  url: 'mapping/resetmapping',\r",
                    "  method: 'POST',\r",
                    "  params: {\r",
                    "    contextName: mapPanel.contextName,\r",
                    "    endpoint: mapPanel.endpoint,\r",
                    "    baseUrl: mapPanel.baseUrl,\r",
                    "    roleId: node.data.record.id,\r",
                    "    templateId: node.parentNode.data.record.id,\r",
                    "    parentClassId: node.parentNode.parentNode.data.identifier,\r",
                    "    graphName: mapPanel.graphName,\r",
                    "    index: node.parentNode.parentNode.indexOf(node.parentNode)\r",
                    "  },\r",
                    "  success: function () {\r",
                    "    tree.onReload();\r",
                    "  },\r",
                    "  failure: function () { }\r",
                    "});"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.menu.Item",
                "designer|controlQuery": "menuitem[action=resetmapping]"
            },
            "designerId": "b58a2f73-e046-4b1b-9b9e-108def03c707"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onMapValueList",
                "fn": "onMapValueList",
                "implHandler": [
                    "var me = this;\r",
                    "var mapPanel = content.down('mappingpanel');\r",
                    "var tree = mapPanel.down('mappingtree'),\r",
                    "node = tree.getSelectedNode();\r",
                    "\r",
                    "me.getParentClass(node);\r",
                    "\r",
                    "var win = Ext.widget('valuelistwindow');\r",
                    "\r",
                    "var formRecord = {\r",
                    "  'mappingNode': node,\r",
                    "  'index': node.parentNode.parentNode.indexOf(node.parentNode),\r",
                    "  'classId': me.parentClass,\r",
                    "  'graphName': mapPanel.graphName,\r",
                    "  'roleName': node.data.record.name,\r",
                    "  'contextName': mapPanel.contextName,\r",
                    "  'endpoint': mapPanel.endpoint,\r",
                    "  'baseUrl': mapPanel.baseUrl\r",
                    "};\r",
                    "\r",
                    "var form = win.down('form');\r",
                    "form.getForm().setValues(formRecord);\r",
                    "\r",
                    "win.on('Save', function () {\r",
                    "  win.destroy();\r",
                    "  tree.onReload();\r",
                    "}, me);\r",
                    "\r",
                    "win.on('reset', function () {\r",
                    "  win.destroy();\r",
                    "}, me);\r",
                    "\r",
                    "win.show();"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.menu.Item",
                "designer|controlQuery": "menuitem[action=mapvaluelist]"
            },
            "designerId": "4d47b873-3c75-4952-9cad-82f3f8e19d6e"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onEditOrNewValueList",
                "fn": "onEditOrNewValueList",
                "implHandler": [
                    "var me = this; \r",
                    "var state, oldValueList, contextName, endpoint, baseUrl, valueList, wintitle;\r",
                    "var tree = this.getDirTree(),\r",
                    "node = tree.getSelectedNode();\r",
                    "\r",
                    "if(item.itemId == 'editvaluelist') {\r",
                    "  state = 'edit';\r",
                    "  valueList = node.data.record.record.name;\r",
                    "  wintitle = 'Edit Value List \\\"' + node.data.text + '\\\"';\r",
                    "} else {\r",
                    "  state = 'new';\r",
                    "  wintitle = 'Add New ValueList';\r",
                    "}\r",
                    "\r",
                    "var win = Ext.widget('valuelistwindow', {\r",
                    "  id: 'tab-' + node.data.id,\r",
                    "  title: wintitle\r",
                    "});\r",
                    "\r",
                    "var formRecord = {\r",
                    "  'state': state,\r",
                    "  'oldValueList': valueList,\r",
                    "  'contextName': node.data.property.context,\r",
                    "  'endpoint': node.data.property.endpoint,\r",
                    "  'baseUrl': node.data.property.baseUrl,\r",
                    "  'valueList': valueList\r",
                    "};\r",
                    "\r",
                    "var form = win.down('form').getForm();\r",
                    "form.setValues(formRecord);\r",
                    "\r",
                    "win.on('save', function () {\r",
                    "  win.close();\r",
                    "  tree.onReload();\r",
                    "}, me);\r",
                    "\r",
                    "win.on('reset', function () {\r",
                    "  win.close();\r",
                    "}, me);\r",
                    "\r",
                    "win.show();\r",
                    ""
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.menu.Item",
                "designer|controlQuery": "menuitem[action=editnewvaluelist]"
            },
            "designerId": "06ab17bd-89d7-49d9-987b-75fa9a8a5054"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onMakePossessor",
                "fn": "onMakePossessor",
                "implHandler": [
                    "var me = this;\r",
                    "var content = me.getMainContent();\r",
                    "var mapPanel = content.down('mappingpanel');\r",
                    "var tree = mapPanel.down('mappingtree'),\r",
                    "node = tree.getSelectedNode(), \r",
                    "parentNode = node.parentNode;\r",
                    "\r",
                    "Ext.Ajax.request({\r",
                    "  url: 'mapping/makePossessor',\r",
                    "  method: 'POST',\r",
                    "  params: {\r",
                    "    contextName: mapPanel.contextName,\r",
                    "    endpoint: mapPanel.endpoint,\r",
                    "    baseUrl: mapPanel.baseUrl,\r",
                    "    graphName: mapPanel.graphName,\r",
                    "    roleName: getLastXString(node.data.id, 1),\r",
                    "    classId: parentNode.parentNode.data.identifier,\r",
                    "    index: parentNode.parentNode.indexOf(parentNode)\r",
                    "  },\r",
                    "  success: function () {\r",
                    "    tree.onReload();\r",
                    "  },\r",
                    "  failure: function () { }\r",
                    "});"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.menu.Item",
                "designer|controlQuery": "menuitem[action=makepossessor]"
            },
            "designerId": "80fccd50-31f2-4927-bbb4-e1ebc4486aba"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onDeleteGraphMap",
                "fn": "onDeleteGraphMap",
                "implHandler": [
                    "var me = this;\r",
                    "var tree = me.getDirTree(),\r",
                    "node = tree.getSelectedNode();\r",
                    "\r",
                    "Ext.Ajax.request({\r",
                    "  url: 'mapping/deletegraphmap',\r",
                    "  method: 'POST',\r",
                    "  params: {\r",
                    "    contextName: node.data.property.context,\r",
                    "    endpoint: node.data.property.endpoint,\r",
                    "    baseUrl: node.data.property.baseUrl,\r",
                    "    mappingNode: node.id,\r",
                    "    graphName: getLastXString(node.id, 1)\r",
                    "  },\r",
                    "  success: function () {\r",
                    "    var parentNode = node.parentNode;\r",
                    "    tree.getSelectionModel().select(parentNode);\r",
                    "    tree.onReload();\r",
                    "  },\r",
                    "  failure: function () { }\r",
                    "});"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.menu.Item",
                "designer|controlQuery": "menuitem[action=deletegraph]"
            },
            "designerId": "84bfa7a1-0e07-4f85-838a-e9ffa54ffa2b"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onDeleteValueList",
                "fn": "onDeleteValueList",
                "implHandler": [
                    "var me = this;\r",
                    "var tree = me.getDirTree(),\r",
                    "  node = tree.getSelectedNode(),\r",
                    "  parentNode = node.parentNode,\r",
                    "  valueList = getLastXString(node.id, 1);\r",
                    "\r",
                    "Ext.Ajax.request({\r",
                    "  url: 'mapping/deletevaluelist',\r",
                    "  method: 'POST',\r",
                    "  params: {\r",
                    "    contextName: node.data.property.context,\r",
                    "    endpoint: node.data.property.endpoint,\r",
                    "    baseUrl: node.data.property.baseUrl,\r",
                    "    valueList: valueList\r",
                    "  },\r",
                    "  success: function () {\r",
                    "    tree.getSelectionModel().select(parentNode);\r",
                    "    tree.onReload();\r",
                    "  },\r",
                    "  failure: function () { }\r",
                    "});"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.menu.Item",
                "designer|controlQuery": "menuitem[action=deletevaluelist]"
            },
            "designerId": "d190fba5-e3fa-45ca-a837-4e19955d55f1"
        }
    ]
}